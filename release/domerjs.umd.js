!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).domerjs={})}(this,function(e){function n(){return(n=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function t(e,n){window.history.pushState({path:n},"",n);var t=e.getFirstParent(function(e){return!0===e.router});t&&t.update()}var r={router:function(e){return{router:!0,tag:"div",render:function(){var n=window.location.pathname;return e(n)},windowEvents:{popstate:function(){this.update()}}}},link:function(e,r,o){return{tag:"a",props:n({href:e},o),render:r,events:{click:function(n){n.preventDefault(),t(this,e);var r=e.indexOf("#");if(-1!==r){var o=e.substring(r+1),i=document.getElementById(o);i&&window.scrollTo(0,i.offsetTop)}}}}},pushRoute:t};function o(e,n){var t=e.props,r=void 0===t?{}:t;return"function"==typeof r[n]?r[n].bind(e).call():r[n]}function i(e){var n=[];return Array.isArray(e)?n=e:e&&"object"==typeof e&&(e.tag?n.push(e):n=Object.values(e)),n}function u(e){e.appended&&("function"==typeof e.onDetach&&e.onDetach(),e.parent.element.removeChild(e.element),e.appended=!1,i(e.children).forEach(function(e){return u(e)}))}var c=["string","number"],a=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];e.cl=function(e){return[].slice.call(arguments,1).map(function(n){return e[n]}).join(" ")},e.createApp=function(e,n,t){!function e(n,t,r){(function(n,t,r){n.mounted||(t&&(n.parent=t),r.context&&(n.context=r.context),n.state||(n.state={}),n.element=document.createElement(n.tag),n.mounted=!0,function(e){e.listeners=[],Object.keys(e).forEach(function(n){var t=null;if("events"===n&&(t=e.element),"windowEvents"===n&&(t=window),"documentEvents"===n&&(t=document),t){var r=e[n];Object.keys(r).forEach(function(n){var o=r[n].bind(e);e.listeners.push({element:t,eventKey:n,eventFunc:o}),t.addEventListener(n,o)})}})}(n),function(n,t){n.update=function(){this.mounted&&(e(this,null,t),"function"==typeof n.onUpdate&&n.onUpdate())}}(n,r),function(e){e.setState=function(e){var n=this;Object.keys(e).forEach(function(t){n.state[t]=e[t]}),this.update()}}(n),function(e){e.getFirstParent=function(e){return this.parent&&this.parent.getFirstParent?e(this.parent)?this.parent:this.parent.getFirstParent(e):null}}(n),"function"==typeof n.onMount&&n.onMount())})(n,t,r),function(e){var n=e.props,t=e.element;Object.keys(void 0===n?{}:n).forEach(function(n){var r=o(e,n);!1===r?t.removeAttribute(n):t.setAttribute(n,r)})}(n);var a=n.children,f=function e(n,t){if("function"==typeof t){var r=n.render();return e(n,r)}return t}(n,n.render);f&&(n.children=f);var p=i(a),s=i(n.children);p.forEach(function(e){u(e),s.find(function(n){return n.element&&e.element.isEqualNode(n.element)})||function e(n){n.mounted&&("function"==typeof n.onUnMount&&n.onUnMount(),function(e){e.listeners.forEach(function(e){e.element.removeEventListener(e.eventKey,e.eventFunc)}),e.listeners=[]}(n),n.parent=null,n.element=null,n.mounted=!1,i(n.children).forEach(function(n){return e(n)}))}(e)}),-1!==c.indexOf(typeof a)&&-1===c.indexOf(typeof n.children)&&(n.html?n.element.innerHTML="":n.element.textContent=""),-1===c.indexOf(typeof n.children)||n.children===a&&n.appended||(n.html?n.element.innerHTML=n.children:n.element.textContent=n.children),s.forEach(function(t){e(t,n,r)}),!1===f?u(n):function(e){e.appended||(e.parent.element.appendChild(e.element),e.appended=!0,"function"==typeof e.onAppend&&e.onAppend())}(n)}(e,{element:n},t)},e.createHtml=function e(n,t){t&&!n.parent&&(n.parent=t);var r=function(e){var n="",t=e.props;return Object.keys(void 0===t?{}:t).forEach(function(t){var r=t;"className"===r&&(r="class"),n+=" "+r+'="'+o(e,t)+'"'}),n}(n),u=n.tag,c=n.render;if(-1!==a.indexOf(u))return"<"+u+r+"/>";var f="";"string"==typeof c&&(f+=c);var p=n.children;if("function"==typeof c){var s=n.render();"string"==typeof s?f+=s:p=s}return i(p).forEach(function(t){return f+=e(t,n)}),"<"+u+r+">"+f+"</"+u+">"},e.routing=r,e.st=function(e){var n="";return Object.keys(e).forEach(function(t){n+=function(e){return e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}(t)+":"+e[t]+";"}),n}});
//# sourceMappingURL=domerjs.umd.js.map
