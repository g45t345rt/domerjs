function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function t(e,t){window.history.pushState({path:t},"",t);const n=e.getFirstParent(e=>!0===e.router);n&&n.update()}const n={router:e=>({router:!0,tag:"div",render:function(){const{pathname:t}=window.location;return e(t)},windowEvents:{popstate:function(){this.update()}}}),link:(n,o,r)=>({tag:"a",props:e({href:n},r),render:o,events:{click:function(e){e.preventDefault(),t(this,n);const o=n.indexOf("#");if(-1!==o){const e=n.substring(o+1),t=document.getElementById(e);t&&window.scrollTo(0,t.offsetTop)}}}}),pushRoute:t};function o(e,t){const{props:n={}}=e;return"function"==typeof n[t]?n[t].bind(e).call():n[t]}function r(e){let t=[];return Array.isArray(e)?t=e:e&&"object"==typeof e&&(e.tag?t.push(e):t=Object.values(e)),t}function c(e){e.appended&&("function"==typeof e.onDetach&&e.onDetach(),e.parent.element.removeChild(e.element),e.appended=!1,r(e.children).forEach(e=>c(e)))}const i=["string","number"];function u(e,t,n){!function e(t,n,u){(function(t,n,o){t.mounted||(n&&(t.parent=n),o.context&&(t.context=o.context),t.state||(t.state={}),t.element=document.createElement(t.tag),t.mounted=!0,function(e){e.listeners=[],Object.keys(e).forEach(t=>{let n=null;if("events"===t&&(n=e.element),"windowEvents"===t&&(n=window),"documentEvents"===t&&(n=document),!n)return;const o=e[t];Object.keys(o).forEach(t=>{const r=o[t].bind(e);e.listeners.push({element:n,eventKey:t,eventFunc:r}),n.addEventListener(t,r)})})}(t),function(t,n){t.update=function(){this.mounted&&(e(this,null,n),"function"==typeof t.onUpdate&&t.onUpdate())}}(t,o),function(e){e.setState=function(e){Object.keys(e).forEach(t=>{this.state[t]=e[t]}),this.update()}}(t),function(e){e.getFirstParent=function(e){return this.parent&&this.parent.getFirstParent?e(this.parent)?this.parent:this.parent.getFirstParent(e):null}}(t),"function"==typeof t.onMount&&t.onMount())})(t,n,u),function(e){const{props:t={},element:n}=e;Object.keys(t).forEach(t=>{const r=o(e,t);!1===r?n.removeAttribute(t):n.setAttribute(t,r)})}(t);const s=t.children,a=function e(t,n){if("function"==typeof n){const n=t.render();return e(t,n)}return n}(t,t.render);a&&(t.children=a);const f=r(s),l=r(t.children);f.forEach(e=>{c(e),l.find(t=>t.element&&e.element.isEqualNode(t.element))||function e(t){t.mounted&&("function"==typeof t.onUnMount&&t.onUnMount(),function(e){e.listeners.forEach(e=>{const{element:t,eventKey:n,eventFunc:o}=e;t.removeEventListener(n,o)}),e.listeners=[]}(t),t.parent=null,t.element=null,t.mounted=!1,r(t.children).forEach(t=>e(t)))}(e)}),-1!==i.indexOf(typeof s)&&-1===i.indexOf(typeof t.children)&&(t.html?t.element.innerHTML="":t.element.textContent=""),-1===i.indexOf(typeof t.children)||t.children===s&&t.appended||(t.html?t.element.innerHTML=t.children:t.element.textContent=t.children),l.forEach(n=>{e(n,t,u)}),!1===a?c(t):function(e){e.appended||(e.parent.element.appendChild(e.element),e.appended=!0,"function"==typeof e.onAppend&&e.onAppend())}(t)}(e,{element:t},n)}function s(e,...t){return t.map(t=>e[t]).join(" ")}function a(e){let t="";return Object.keys(e).forEach(n=>{t+=`${function(e){return e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}(n)}:${e[n]};`}),t}const f=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];function l(e,t){t&&!e.parent&&(e.parent=t);const n=function(e){let t="";const{props:n={}}=e;return Object.keys(n).forEach(n=>{let r=n;"className"===r&&(r="class"),t+=` ${r}="${o(e,n)}"`}),t}(e),{tag:c,render:i}=e;if(-1!==f.indexOf(c))return`<${c}${n}/>`;{let t="";"string"==typeof i&&(t+=i);let o=e.children;if("function"==typeof i){const n=e.render();"string"==typeof n?t+=n:o=n}return r(o).forEach(n=>t+=l(n,e)),`<${c}${n}>${t}</${c}>`}}export{s as cl,u as createApp,l as createHtml,n as routing,a as st};
//# sourceMappingURL=domerjs.modern.js.map
