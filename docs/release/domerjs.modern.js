function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}let t="";function n(e){if("string"==typeof e)return n({path:e});if(Array.isArray(e))return e.some(e=>n(e));const{path:o,exact:r=!0}=e,{pathname:c}=window.location;if(!c.startsWith(t))return!1;const i=c.replace(t,"");return r?i===o:i.startsWith(o)}const o=e=>t=e;function r(e){const n=`${t}${e}`;window.history.pushState({path:n},"",n),window.dispatchEvent(new Event("popstate"));const o=e.indexOf("#");if(-1!==o){const t=e.substring(o+1),n=document.getElementById(t);n&&window.scrollTo(0,n.offsetTop)}}const c=(t,n,o)=>({tag:"a",props:e({href:t},o),render:n,events:{click:function(e){e.preventDefault(),r(t)}}});function i(e,t){const{props:n={}}=e;return"function"==typeof n[t]?n[t].bind(e).call():n[t]}function s(e){let t=[];return Array.isArray(e)?t=e:e&&"object"==typeof e&&(e.tag?t.push(e):t=Object.values(e)),t}function a(e){e.appended&&("function"==typeof e.onDetach&&e.onDetach(),e.parent.element.removeChild(e.element),e.appended=!1,s(e.children).forEach(e=>a(e)))}const u=["string","number"];function f(e,t,n={}){!function e(t,n,o){(function(t,n,o){t.mounted||(n&&(t.parent=n),t.context||(t.context=o),t.state||(t.state={}),t.element=document.createElement(t.tag),t.mounted=!0,function(e){e.listeners=[],Object.keys(e).forEach(t=>{let n=null;if("events"===t&&(n=e.element),"windowEvents"===t&&(n=window),"documentEvents"===t&&(n=document),!n)return;const o=e[t];Object.keys(o).forEach(t=>{const r=o[t].bind(e);e.listeners.push({element:n,eventKey:t,eventFunc:r}),n.addEventListener(t,r)})})}(t),function(t,n){t.update=function(){this.mounted&&(e(this,null,n),"function"==typeof t.onUpdate&&t.onUpdate())}}(t,o),function(e){e.setState=function(e){Object.keys(e).forEach(t=>{this.state[t]=e[t]}),this.update()}}(t),function(e){e.getFirstParent=function(e){return this.parent&&this.parent.getFirstParent?e(this.parent)?this.parent:this.parent.getFirstParent(e):null}}(t),"function"==typeof t.onMount&&t.onMount())})(t,n,o),function(e){const{props:t={},element:n}=e;Object.keys(t).forEach(t=>{const o=i(e,t);!1===o?n.removeAttribute(t):n.setAttribute(t,o)})}(t);const r=t.children,c=function e(t,n){if("function"==typeof n){const n=t.render();return e(t,n)}return n}(t,t.render);c&&(t.children=c);const f=s(r),p=s(t.children);f.forEach(e=>{a(e),p.find(t=>t.element&&e.element.isEqualNode(t.element))||function e(t){t.mounted&&("function"==typeof t.onUnMount&&t.onUnMount(),function(e){e.listeners.forEach(e=>{const{element:t,eventKey:n,eventFunc:o}=e;t.removeEventListener(n,o)}),e.listeners=[]}(t),t.parent=null,t.element=null,t.mounted=!1,s(t.children).forEach(t=>e(t)))}(e)}),-1!==u.indexOf(typeof r)&&-1===u.indexOf(typeof t.children)&&(t.html?t.element.innerHTML="":t.element.textContent=""),-1===u.indexOf(typeof t.children)||t.children===r&&t.appended||(t.html?t.element.innerHTML=t.children:t.element.textContent=t.children),p.forEach(n=>{e(n,t,o)}),!1===c?a(t):function(e){e.appended||(e.parent.element.appendChild(e.element),e.appended=!0,"function"==typeof e.onAppend&&e.onAppend())}(t)}(e,{element:t},n)}function p(e,...t){return t.map(t=>e[t]).join(" ")}function l(e){let t="";return Object.keys(e).forEach(n=>{t+=`${function(e){return e.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()}(n)}:${e[n]};`}),t}const d=["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"];function h(e,t){t&&!e.parent&&(e.parent=t);const n=function(e){let t="";const{props:n={}}=e;return Object.keys(n).forEach(n=>{let o=n;"className"===o&&(o="class"),t+=` ${o}="${i(e,n)}"`}),t}(e),{tag:o,render:r}=e;if(-1!==d.indexOf(o))return`<${o}${n}/>`;{let t="";"string"==typeof r&&(t+=r);let c=e.children;if("function"==typeof r){const n=e.render();"string"==typeof n?t+=n:c=n}return s(c).forEach(n=>t+=h(n,e)),`<${o}${n}>${t}</${o}>`}}export{p as cl,f as createApp,h as createHtml,c as link,r as pushRoute,n as routeMatch,o as setBaseroute,l as st};
//# sourceMappingURL=domerjs.modern.js.map
